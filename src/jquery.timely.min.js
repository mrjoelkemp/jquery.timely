(function(e){"use strict";var t='<div class="timely"></div>',n='<div class="time-unit"></div>',r='<div class="time-grid"></div>',i='<div class="x-axis"></div>',s='<div class="y-axis"></div>',o=["January","February","March","April","May","June","July","August","September","October","November","December"],u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a='<div class="month-name"></div>',f='<div class="day-name"></div>',l='<div class="week"></div>';e.fn.timely=function(t){t=e.extend({period:"monthly",color:"#0F0"},t);var n=c(t.period);t.color=d(t.color)?m(t.color):t.color;h(n,t.data,t.color);e(this).html(n)};var c=function(n){var r,l,c,h;if(n.toLowerCase()==="monthly"){r=e(t);l=e(i);o.forEach(function(t){var n=e(a).text(t.slice(0,3));l.append(n)});c=e(s);u.forEach(function(t,n){var r=e(f).text(t[0].toUpperCase());n%2===0&&r.css("visibility","hidden");c.append(r)});r.append(l);h=p();h.prepend(c);r.append(h)}return r},h=function(t,n,r){var i=t.find(".time-unit"),s={};e.each(i,function(t,n){var r=e(n).data("value");typeof r!="undefined"&&(s[r]=t)});e.each(n,function(t,n){var o=i[s[t]];if(o){e(o).data("intensity",n);o.style.background=v(r,n)}})},p=function(){var t=e(n),i=e(r),s,o;for(var u=1;u<=52;u++){s=e(l);s.addClass(u.toString()).data("value",u);for(var a=1;a<=7;a++){o=a+7*(u-1);t=e(n);t.addClass("day "+o).data("value",o);s.append(t)}i.append(s)}return i},d=function(e){return typeof e=="string"&&e.indexOf("#")!==-1&&(e.length===4||e.length===7)},v=function(e,t){t=typeof t!="undefined"?t:1;return"rgba("+e.r+","+e.g+","+e.b+","+t+")"},m=function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}})(window.jQuery);